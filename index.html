<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Page title</title><link rel="stylesheet" href="/goit-js-hw-11/index.a2e3175f.css"></head><body> <form class="search-form" id="search-form"> <input type="text" name="searchQuery" autocomplete="off" placeholder="Search images..."> <button type="submit">Search</button> </form> <div class="gallery-container"> <ul class="gallery-list js-gallery"></ul> </div> <button type="button" class="js-load-more load-more">Load more</button>  <article class="example" id="uk"> <h1>HTML-partials</h1>  <img src="/goit-js-hw-11/logo.b0cae28f.png" alt width="320"> <p> The <a href="https://github.com/posthtml/posthtml-include" target="_blank" rel="noopener noreferrer"> posthtml-include </a> plugin allows you to add code from other HTML files (fragments) to HTML page files. Fragments are stored in the <code>src/partials</code> folder. The addition occurs when compiling page files, such as <code>index.html</code>. </p> <p> This <code>example.html</code> file is an example of such a snippet, with the markup of a certain part of the main page. This is very convenient for team development on student projects, when several people write in one HTML file at once. </p> <p> The syntax for adding a fragment to the main file is: <code> &lt;include src="./partials/filename.html"&gt;&lt;/include&gt;</code> </p> <div class="background"></div> </article> import axios from 'axios'; import Notiflix from 'notiflix'; import { PixabayAPI } from './PixabayAPI'; import { createGalleryCard } from './createGalleryCard'; // I have a Content Security Policy error when I use SimpleLightBox, so, I will not use it now but I will work on it later // import SimpleLightbox from 'simplelightbox'; // import 'simplelightbox/dist/simple-lightbox.min.css'; const galleryEl = document.querySelector('.js-gallery'); const searchFormEl = document.querySelector('.search-form'); const loadMoreBtn = document.querySelector('.js-load-more'); const inputEl = searchFormEl.firstElementChild; const api = new PixabayAPI(); hideLoadMoreBtn(); // CREATE MARKUP FOR THE FIRST DEFAULT PAGE // defaultPage(); async function defaultPage() { try { const response = await api.fetchPhotos(); const markup = createGalleryCard(response.data); galleryEl.innerHTML = markup; } catch (error) { console.warn(); } } // CREATE EVENT "SEARCH" AND ITS FUNCTION // searchFormEl.addEventListener('submit', async evt => { await handleSearchForm(evt); }); async function handleSearchForm(evt) { api.page = 1; evt.preventDefault(); let searchValue = inputEl.value.trim(); api.query = searchValue; if (!searchValue) { return; } try { const response = await api.fetchQuery(); showLoadMoreBtn(); const { data } = response; const markup = createGalleryCard(data); galleryEl.innerHTML = markup; if (galleryEl.innerHTML === '') { inputEl.value = ''; hideLoadMoreBtn(); return Notiflix.Notify.failure( `Sorry, there are no images matching your search query. Please try again.` ); } Notiflix.Notify.success( `We found ${ data.totalHits } pictures for you under category "${searchValue.toUpperCase()}"` ); if (40 / data.hits.length > 1) { hideLoadMoreBtn(); Notiflix.Notify.warning( "We're sorry, but you've reached the end of search results." ); } galleryEl.innerHTML.refresh(); } catch (error) { console.warn(); } inputEl.value = ''; } // CREATE EVENT "LOAD MORE" AND ITS FUNCTION // loadMoreBtn.addEventListener('click', async () => { await handleLoadMoreBtn(); }); async function handleLoadMoreBtn() { api.page += 1; try { const response = await api.fetchQuery(); const { data } = response; galleryEl.insertAdjacentHTML('beforeend', createGalleryCard(data)); if (40 / data.hits.length > 1) { hideLoadMoreBtn(); Notiflix.Notify.warning( "We're sorry, but you've reached the end of search results." ); } } catch (error) { console.warn(); } } // new SimpleLightbox('.gallery a', { // captionDelay: 250, // }); // ADDITIONAL FUNCTIONS // function hideLoadMoreBtn() { loadMoreBtn.style.display = 'none'; } function showLoadMoreBtn() { loadMoreBtn.style.display = 'block'; } // for my internal use - without async/await +++++++++++++++++++++++++++++++++++++++++ // CREATE MARKUP FOR THE FIRST DEFAULT PAGE // // ==================================================== // api // .fetchPhotos() // .then(response => { // const markup = createGalleryCard(response.data); // galleryEl.innerHTML = markup; // }) // .catch(console.warn()); // ===================================================== // CREATE EVENT "SEARCH" AND ITS FUNCTION // // ======================================================= // searchFormEl.addEventListener('submit', handleSearchForm); // function handleSearchForm(evt) { // api.page = 1; // evt.preventDefault(); // let searchValue = inputEl.value.trim(); // api.query = searchValue; // if (!searchValue) { // return; // } // api // .fetchQuery() // .then(response => { // showLoadMoreBtn(); // const { data } = response; // const markup = createGalleryCard(data); // galleryEl.innerHTML = markup; // if (galleryEl.innerHTML === '') { // return Notiflix.Notify.failure( // `Sorry, there are no images matching your search query. Please try again.` // ); // } // Notiflix.Notify.success( // `We found ${ // data.totalHits // } pictures for you under category "${searchValue.toUpperCase()}"` // ); // if (40 / data.hits.length > 1) { // hideLoadMoreBtn(); // Notiflix.Notify.warning( // "We're sorry, but you've reached the end of search results." // ); // } // }) // .catch(console.warn()); // inputEl.value = ''; // } // ================================================================= // CREATE EVENT "LOAD MORE" AND ITS FUNCTION // // ================================================================= // loadMoreBtn.addEventListener('click', handleLoadMoreBtn); // function handleLoadMoreBtn() { // api.page += 1; // api // .fetchQuery() // .then(response => { // const { data } = response; // galleryEl.insertAdjacentHTML('beforeend', createGalleryCard(data)); // if (40 / data.hits.length > 1) { // hideLoadMoreBtn(); // Notiflix.Notify.warning( // "We're sorry, but you've reached the end of search results." // ); // } // }) // .catch(console.warn); // } // ===================================================================== <script type="module" src="/goit-js-hw-11/index.2eceea6d.js"></script><script src="/goit-js-hw-11/index.3492ddce.js" nomodule defer></script> </body></html>